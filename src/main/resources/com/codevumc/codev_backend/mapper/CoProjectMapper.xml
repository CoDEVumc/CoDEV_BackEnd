<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.codevumc.codev_backend.mapper.CoProjectMapper">

    <insert id="insertCoProject" parameterType="CoProject" useGeneratedKeys="true" keyProperty="co_projectId">
        INSERT INTO CoProject
            (co_email, co_title, co_location, co_content, co_process, co_deadLine)
        VALUES (#{co_email}, #{co_title}, #{co_location}, #{co_content}, 'ING', #{co_deadLine})

    </insert>

    <insert id="insertCoPartOfProject" parameterType="hashMap">
        INSERT INTO CoPartOfProject
            (co_projectId, co_part, co_limit)
        VALUES (#{co_projectId}, #{co_part}, #{co_limit})
    </insert>

    <insert id="insertCoLanguageOfProject">
        INSERT INTO CoLanguageOfProject
        (co_projectId, co_languageId)
        values (#{co_projectId}, #{co_languageId})
    </insert>

    <select id="getCoProject" resultType="CoProject">
        select * from CoProject where co_projectId = #{co_projectId}
    </select>

    <select id ="getCoHeartOfProject" resultType="CoHeartOfProject">
        SELECT status FROM CoHeartOfProject WHERE co_projectId = ${co_projectId}
    </select>

    <insert id ="insertCoHeartOfProject" >
        INSERT INTO CoHeartOfProject (co_email,co_projectId)
        VALUES (#{co_email},#{co_projectId})
    </insert>

    <delete id="deleteCoHeartOfProject">
        DELETE FROM CoHeartOfProject
        WHERE co_projectId = #{co_projectId}
    </delete>

    <select id="getCoPartList" resultType="CoPartOfProject">
        select co_part, co_limit from CoPartOfProject where co_projectId = #{co_projectId}
    </select>

    <select id="getCoLanguageList" resultType="CoLanguageOfProject">
        select cl.co_languageId, cl.co_language, cl.co_logo from CoLanguageOfProject cop
        join CoLanguage cl on cl.co_languageId = cop.co_languageId
        where co_projectId = #{co_projectId}
    </select>

    <select id="getCoHeartCount" resultType="Long">
        select count(*) as coHeartCount from CoHeartOfProject where co_projectId = #{co_projectId}
    </select>
    
</mapper>